# 타임리프 - 기본 기능 


### 텍스트 - text, utext

```html
<!--data: "Hello Spring!"-->
<li>th:text 사용 <span th:text="${data}"></span></li>
<li>컨텐츠 안에서 직접 출력하기 = [[${data}]]</li

<!-- data: "Hello <b>Spring!</b>" -->
<li>th:utext = <span th:utext="${data}"></span></li>
<li><span th:inline="none">[(...)] = </span>[(${data})]</li> 
```

<br>

### 변수 - SpringEL

```html
<ul>Object
 <li>${user.username} = <span th:text="${user.username}"></span></li>
 <li>${user['username']} = <span th:text="${user['username']}"></span></li>
 <li>${user.getUsername()} = <span th:text="${user.getUsername()}"></span></li>
</ul>

<ul>List
 <li>${users[0].username} = <span th:text="${users[0].username}"></span></li>
 <li>${users[0]['username']} = <span th:text="${users[0]['username']}"></span></li>
 <li>${users[0].getUsername()} = <span th:text="${users[0].getUsername()}"></span></li>
</ul>

<ul>Map
 <li>${userMap['userA'].username} = <span th:text="${userMap['userA'].username}"></span></li>
 <li>${userMap['userA']['username']} = <span th:text="${userMap['userA']['username']}"></span></li> <li>${userMap['userA'].getUsername()} = <span th:text="${userMap['userA'].getUsername()}"></span></li>
</ul>
```

<br>

### 기본 객체들

```java
@GetMapping("/basic-objects")
public String basicObjects(Model model, HttpServletRequest request,
HttpServletResponse response, HttpSession session) {
 session.setAttribute("sessionData", "Hello Session");
 model.addAttribute("request", request);
 model.addAttribute("response", response);
 model.addAttribute("servletContext", request.getServletContext());
 return "basic/basic-objects";
}

@Component("helloBean")
static class HelloBean {
 public String hello(String data) {
 return "Hello " + data;
 }
}
```

```html
<h1>식 기본 객체 (Expression Basic Objects)</h1>
<ul>
 <li>request = <span th:text="${request}"></span></li>
 <li>response = <span th:text="${response}"></span></li>
 <li>session = <span th:text="${session}"></span></li>
 <li>servletContext = <span th:text="${servletContext}"></span></li>
 <li>locale = <span th:text="${#locale}"></span></li>
</ul>

<h1>편의 객체</h1>
<ul>
 <li>Request Parameter = <span th:text="${param.paramData}"></span></li>
 <li>session = <span th:text="${session.sessionData}"></span></li>
 <li>spring bean = <span th:text="${@helloBean.hello('Spring!')}"></span></
li>
</ul>
```

<br>

### 유틸리티 객체와 날짜
```
타임리프 유틸리티 객체들 
#message : 메시지, 국제화 처리           
#uris : URI 이스케이프 지원           
#dates : java.util.Date 서식 지원            
#calendars : java.util.Calendar 서식 지원            
#temporals : 자바8 날짜 서식 지원          
#numbers : 숫자 서식 지원            
#strings : 문자 관련 편의 기능          
#objects : 객체 관련 기능 제공                
#bools : boolean 관련 기능 제공                            
#arrays : 배열 관련 기능 제공                             
#lists , #sets , #maps : 컬렉션 관련 기능 제공              
#ids : 아이디 처리 관련 기능 제공, 뒤에서 설명                  
```

```java
@GetMapping("/date")
public String date(Model model) {
 model.addAttribute("localDateTime", LocalDateTime.now());
 return "basic/date";
}
```

```html
<h1>LocalDateTime</h1>
<ul>
 <li>default = <span th:text="${localDateTime}"></span></li>
 <li>yyyy-MM-dd HH:mm:ss = <span th:text="${#temporals.format(localDateTime, 'yyyy-MM-dd HH:mm:ss')}"></span></li>
</ul>

<h1>LocalDateTime - Utils</h1>
<ul>
 <li>${#temporals.day(localDateTime)} = <span th:text="${#temporals.day(localDateTime)}"></span></li>
 <li>${#temporals.month(localDateTime)} = <span th:text="${#temporals.month(localDateTime)}"></span></li>
 <li>${#temporals.monthName(localDateTime)} = <span th:text="${#temporals.monthName(localDateTime)}"></span></li>
 <li>${#temporals.monthNameShort(localDateTime)} = <span th:text="${#temporals.monthNameShort(localDateTime)}"></span></li>
 <li>${#temporals.year(localDateTime)} = <span th:text="${#temporals.year(localDateTime)}"></span></li>
 <li>${#temporals.dayOfWeek(localDateTime)} = <span th:text="${#temporals.dayOfWeek(localDateTime)}"></span></li>
 <li>${#temporals.dayOfWeekName(localDateTime)} = <span th:text="${#temporals.dayOfWeekName(localDateTime)}"></span></li>
 <li>${#temporals.dayOfWeekNameShort(localDateTime)} = <span th:text="${#temporals.dayOfWeekNameShort(localDateTime)}"></span></li>
 <li>${#temporals.hour(localDateTime)} = <span th:text="${#temporals.hour(localDateTime)}"></span></li>
 <li>${#temporals.minute(localDateTime)} = <span th:text="${#temporals.minute(localDateTime)}"></span></li>
 <li>${#temporals.second(localDateTime)} = <span th:text="${#temporals.second(localDateTime)}"></span></li>
 <li>${#temporals.nanosecond(localDateTime)} = <span th:text="${#temporals.nanosecond(localDateTime)}"></span></li>
</ul>
```

<br>

### URL 링크
```java
@GetMapping("/link")
public String link(Model model) {
 model.addAttribute("param1", "data1");
 model.addAttribute("param2", "data2"); return "basic/link";
}
```

```html
<h1>URL 링크</h1>
<ul>
 <li><a th:href="@{/hello}">basic url</a></li>
 <!-- http://localhost:8080/hello-->
 <li><a th:href="@{/hello(param1=${param1}, param2=${param2})}">hello query param</a></li>
<!--http://localhost:8080/hello?param1=data1&param1=data2 -->
 <li><a th:href="@{/hello/{param1}/{param2}(param1=${param1}, param2=${param2})}">path variable</a></li>
 <!-- http://localhost:8080/hello/data1/data2--> 
 <li><a th:href="@{/hello/{param1}(param1=${param1}, param2=${param2})}">path variable + query parameter</a></li>
 <!--http://localhost:8080/hello/data1?param2=data2 --> 
</ul>
```


<br>


### 리터럴

```<span th:text="hello world!"></span>```
문자 리터럴은 원칙상 ' 로 감싸야 한다. 중간에 공백이 있어서 하나의 의미있는 토큰으로도 인식되지
않는다.

```html
<h1>리터럴</h1>
<ul>
<li>'hello' + ' world!' = <span th:text="'hello' + ' world!'"></span></li>
<li>'hello world!' = <span th:text="'hello world!'"></span></li>
<li>'hello ' + ${data} = <span th:text="'hello ' + ${data}"></span></li>
<li>리터럴 대체 |hello ${data}| = <span th:text="|hello ${data}|"></span></li>
</ul>
```

<br>

### 연산
* 비교연산: HTML 엔티티를 사용해야 하는 부분을 주의하자, 
    * > (gt), < (lt), >= (ge), <= (le), ! (not), == (eq), != (neq, ne)
* 조건식: 자바의 조건식과 유사하다.
* Elvis 연산자: 조건식의 편의 버전
* No-Operation: _ 인 경우 마치 타임리프가 실행되지 않는 것 처럼 동작한다. 이것을 잘 사용하면 HTML
의 내용 그대로 활용할 수 있다. 마지막 예를 보면 데이터가 없습니다. 부분이 그대로 출력된다.

```html
<ul>
  <li>산술 연산
    <ul>
      <li>10 + 2 = <span th:text="10 + 2"></span></li>
      <li>10 % 2 == 0 = <span th:text="10 % 2 == 0"></span></li>
    </ul>
  </li>

  <li>비교 연산
    <ul>
      <li>1 > 10 = <span th:text="1 &gt; 10"></span></li>
      <li>1 gt 10 = <span th:text="1 gt 10"></span></li>
      <li>1 >= 10 = <span th:text="1 >= 10"></span></li>
      <li>1 ge 10 = <span th:text="1 ge 10"></span></li>
      <li>1 == 10 = <span th:text="1 == 10"></span></li>
      <li>1 != 10 = <span th:text="1 != 10"></span></li>
    </ul>
  </li>

  <li>조건식
    <ul>
      <li>(10 % 2 == 0)? '짝수':'홀수' = <span th:text="(10 % 2 == 0)?'짝수':'홀수'"></span></li>
    </ul>
  </li>

  <li>Elvis 연산자
    <ul>
      <li>${data}?: '데이터가 없습니다.' = <span th:text="${data}?: '데이터가 없습니다.'"></span></li>
      <!--data에 저장된 값이 있으면 해당 값 출력, 없으면 "데이터가 없습니다" 출력 -->
      <li>${nullData}?: '데이터가 없습니다.' = <span th:text="${nullData}?:'데이터가 없습니다.'"></span></li>
    </ul>
  </li>

  <li>No-Operation
    <ul>
      <li>${data}?: _ = <span th:text="${data}?: _">데이터가 없습니다.</span></li>
      <!-- data에 저장된 값이 있으면 해당 값 출력, 없으면 기본값(데이터가 없습니다) 출력 -->
      <li>${nullData}?: _ = <span th:text="${nullData}?: _">데이터가 없습니다.</span></li>
    </ul>
  </li>
```

#### 출력 결과 

<img src="" width=50%></img>

<br>

### 속성 값 설정

```html
<h1>속성 설정</h1>
<input type="text" name="mock" th:name="userA" />

<h1>속성 추가</h1>
- th:attrappend = <input type="text" class="text" th:attrappend="class='large'" /><br/>
- th:attrprepend = <input type="text" class="text" th:attrprepend="class='large '" /><br/>
- th:classappend = <input type="text" class="text" th:classappend="large" /><br/>

<h1>checked 처리</h1>
- checked o <input type="checkbox" name="active" th:checked="true" /><br/>
- checked x <input type="checkbox" name="active" th:checked="false" /><br/>
- checked=false <input type="checkbox" name="active" checked="false" /><br/>
```

#### 속성 설정
th:* 속성을 지정하면 타임리프는 기존 속성을 th:* 로 지정한 속성으로 대체한다. 기존 속성이 없다면
새로 만든다.

#### 속성 추가
* th:attrappend : 속성 값의 뒤에 값을 추가한다.
* th:attrprepend : 속성 값의 앞에 값을 추가한다.
* th:classappend : class 속성에 자연스럽게 추가한다.

#### checked 처리
* HTML에서는 ```<input type="checkbox" name="active" checked="false" /> ```이 경우에도
checked 속성이 있기 때문에 checked 처리가 되어버린다.
*  타임리프의 th:checked 는 값이 false 인 경우 checked 속성 자체를 제거한다.
* ```<input type="checkbox" name="active" th:checked="false" />```            
-> 타임리프 렌더링 후: ```<input type="checkbox" name="active" />```

<br>

### 반복

```html
<h1>반복 상태 유지</h1>
<table border="1">
  <tr>
    <th>count</th>
    <th>username</th>
    <th>age</th>
    <th>etc</th>
  </tr>
  <tr th:each="user, userStat : ${users}">
    <td th:text="${userStat.count}">username</td>
    <td th:text="${user.username}">username</td>
    <td th:text="${user.age}">0</td>
    <td>
      index = <span th:text="${userStat.index}"></span>
      count = <span th:text="${userStat.count}"></span>
      size = <span th:text="${userStat.size}"></span>
      even? = <span th:text="${userStat.even}"></span>
      odd? = <span th:text="${userStat.odd}"></span>
      first? = <span th:text="${userStat.first}"></span>
      last? = <span th:text="${userStat.last}"></span> current = <span th:text="${userStat.current}"></span>
    </td>
  </tr>
</table>
```

#### 출력 결과

<img src="" width=50%></img>

#### 반복 기능
```<tr th:each="user : ${users}">```
반복시 오른쪽 컬렉션( ${users} )의 값을 하나씩 꺼내서 왼쪽 변수( user )에 담아서 태그를 반복
실행합니다.
th:each 는 List 뿐만 아니라 배열, java.util.Iterable , java.util.Enumeration 을 구현한 모든
객체를 반복에 사용할 수 있습니다. Map 도 사용할 수 있는데 이 경우 변수에 담기는 값은 Map.Entry
입니다.


#### 반복 상태 유지
```<tr th:each="user, userStat : ${users}">```
반복의 두번째 파라미터를 설정해서 반복의 상태를 확인 할 수 있습니다.
두번째 파라미터는 생략 가능한데, 생략하면 지정한 변수명( user ) + Stat 가 됩니다.
여기서는 user + Stat = userStat 이므로 생략 가능합니다.

#### 반복 상태 유지 기능
index : 0부터 시작하는 값        
count : 1부터 시작하는 값             
size : 전체 사이즈                           
even , odd : 홀수, 짝수 여부( boolean )
first , last :처음, 마지막 여부( boolean )            
current : 현재 객체              

<br>

### 조건부 평가
```html
<td>
 <span th:text="${user.age}">0</span>
 <span th:text="'미성년자'" th:if="${user.age lt 20}"></span> 
 <!--user의 나이가 20미만이면 th:text값 출력 -->
 <span th:text="'미성년자'" th:unless="${user.age ge 20}"></span>
  <!--user의 나이가 20이상이지 않으면 (미만이면 )th:text값 출력 -->
 <!-- -->
 </td>
```

<br>

### 주석
```
<h1>1. 표준 HTML 주석</h1>
<!--
<span th:text="${data}">html data</span>
-->

<h1>2. 타임리프 파서 주석</h1>
<!--/* [[${data}]] */-->

<!--/*-->
<span th:text="${data}">html data</span>
<!--*/-->

<h1>3. 타임리프 프로토타입 주석</h1>
<!--/*/
<span th:text="${data}">html data</span>
/*/-->
```

* 타임리프 프로토타입 주석: 파일로 열었을 때는 출력을하지 않지만, 타임리프로 렌더링을 했을 때만 출력

#### 렌더링 결과

<img src=""></img>


<br>

### 블록
```

```

<br>

### 자바스크립트 인라인
```

```

<br>

### 템플릿 조각
```

```

<br>

### 템플릿 레이아웃2
```

```

<br>
