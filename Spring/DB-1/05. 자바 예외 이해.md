# 자바 예외 이해

### 1. 자바 예외 계층

<img src="" width=50%></img>

* Object : 예외도 객체이다. 모든 객체의 최상위 부모는 Object 이므로 예외의 최상위 부모도 Object 이다.
* Throwable : 최상위 예외이다. 하위에 Exception 과 Error 가 있다.
* Error : 메모리 부족이나 심각한 시스템 오류와 같이 애플리케이션에서 복구 불가능한 시스템 예외이다. 
* Exception : 애플리케이션 로직에서 사용할 수 있는 실질적인 최상위 예외이다. 
RuntimeException을 제외한, Exception 과 그 하위 예외는 모두 컴파일러가 체크하는 체크 예외이다.
* RuntimeException : 컴파일러가 체크 하지 않는 언체크 예외이다.

<br>

### 2. 예외 기본 규칙
1. 예외는 잡아서 처리하거나 던져야 한다.
2. 예외를 잡거나 던질 때 지정한 예외뿐만 아니라 그 예외의 자식들도 함께 처리된다.
예를 들어서 Exception 을 catch 로 잡으면 그 하위 예외들도 모두 잡을 수 있다.
예를 들어서 Exception 을 throws 로 던지면 그 하위 예외들도 모두 던질 수 있다.

<br>


### 3. 체크 예외와 언체크 예외
--> throws 생략 가능 여부 차이

* 체크 예외: 예외를 잡아서 처리하지 않으면 항상 throws 에 던지는 예외를 선언해야 한다.       
    * 기본적으로 언체크(런타임) 예외를 사용
* 언체크 예외: 예외를 잡아서 처리하지 않아도 throws 를 생략할 수 있다.        
     * 체크 예외는 비즈니스 로직상 의도적으로 던지는 예외(해당 예외를 잡아서 반드시 처리해야 하는 문제)에만 사용

<br>

### 4. 체크 예외 문제점
1. 복구 불가능한 예외      
대부분의 예외는 복구가 불가능하다. SQLException 을 예를 들면 데이터베이스에 무언가 문제가 있어서 발생하는 예외이다. 특히나 대부분의 서비스나 컨트롤러는 이런 문제를 해결할 수는 없다

2. 의존 관계에 대한 문제                 
체크 예외인 경우 컨트롤러나 서비스 입장에서는 본인이 처리할 수 없어도 어쩔 수 없이 throws 를 통해 던지는 예외를 선언해야 한다. 향후 리포지토리를 JDBC 기술이 아닌 다른 기술로 변경한다면,  SQLException 이 아니라 JPAException 으로 예외가 변경된다면, SQLException 에 의존하던 모든 서비스와 컨트롤러의 코드를 JPAException 에 의존하도록 고쳐야 한다.

--> SQLException를  RuntimeSQLException 으로 변환할 경우, 런타임 예외이기 때문에 서비스, 컨트롤러는 해당 예외들을 처리할 수 없다면 별도의 선언 없이 그냥 두면 된다. 따라서 위 문제점들이 해결된다.
