# 테스트

## 문제점과 해결 방안

1. 데이터베이스를 연결할 때 로컬에서 사용하는 애플리케이션 서버와 테스트에서 같은 데이터베이스를 사용하면, 테스트에서
문제가 발생한다.   
-> 테스트 전용 데이터베이스를 별도로 운영하도록 한다.

2. 처음 테스트를 실행할 때 저장한 데이터가 계속 남아있기 때문에 두번째 테스트에 영향을 준다.    
-> @Transactional 이 테스트에 있으면 스프링은 테스트를 트랜잭션 안에서 실행하고, 테스트가 끝나면
트랜잭션을 자동으로 롤백시켜 버린다.
(강제로 커밋하고 싶으면 @Commit을 붙여주면 O)

3. 테스트 케이스를 실행하기 위해서 별도의 데이터베이스를 설치하고, 운영하는 것은 상당히 번잡하며 단순히 테스트를 검증할 용도로만 사용하기 때문에 테스트가 끝나면 데이터베이스의 데이터를 모두 삭제해도 된다.                
-> H2 데이터베이스를 임베디드 모드(JVM이 내려가면 같이 종료) 사용한다. 별다른 데이터 베이스 설정 정보가 없으면 스프링 부트는 임베디드 모드로 접근하는데이터소스를 만들어서 제공한다

--> 결론은 테스트를 할 때는 @Transactional만 붙여주면 테스트 전용 데이터 베이스가 임베디드 모드로 작동한다.
